---
- name: Create Network Interface
  azure_rm_networkinterface:
    client_id: "{{ azure_client_id }}"
    secret: "{{ azure_secret }}"
    subscription_id: "{{ azure_subscription_id }}"
    tenant: "{{ azure_tenant }}"
    resource_group: "{{ azure_resource_group }}"
    name: "{{ item.azure_network_interface_name }}"
    virtual_network_name: "{{ azure_virtual_network_name }}"
    subnet_name: default
    public_ip: "{{ azure_public_ip }}"
    public_ip_address_name: "{{ item.name }}"
  with_items: "{{ azure_vm_name }}"
